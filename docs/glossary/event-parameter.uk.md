# Події та параметри подій

**Події та параметри подій** — це фундаментальні компоненти сучасної веб-аналітики, які фіксують детальні взаємодії користувачів, що виходять за межі базових переглядів сторінок. Події відстежують конкретні дії користувачів на вашому сайті або в додатку, а параметри надають додатковий контекст про ці дії, забезпечуючи детальний аналіз поведінки та залученості користувачів.

## Розуміння подій у веб-аналітиці

Подія являє собою **дискретну взаємодію користувача з контентом**, яку можна відстежувати незалежно від переглядів сторінок. На відміну від переглядів сторінок, які спрацьовують при завантаженні сторінки, події фіксують взаємодії, що відбуваються всередині сторінки — кліки, прокручування, відтворення відео, відправки форм, завантаження та безліч інших дій, що вказують на залученість користувача.

Події перетворюють аналітику з пасивного спостереження на активне вимірювання намірів та поведінки користувачів. Вони відповідають не тільки на питання «які сторінки відвідали користувачі?», але й «що користувачі насправді робили на цих сторінках?». Ця відмінність критично важлива для розуміння справжньої цінності та ефективності вашого цифрового контенту.

Сила відстеження подій полягає в його гнучкості та специфічності:

- Відстеження мікроконверсій, що ведуть до макроцілей
- Вимірювання взаємодії з конкретними елементами сторінки
- Розуміння патернів взаємодії користувачів
- Виявлення точок тертя в користувацьких шляхах
- Кількісна оцінка прийняття та використання функцій
- Можливість сегментації на основі поведінки

!!! info "Еволюція відстеження подій"
    Відстеження подій еволюціонувало від простого відстеження кліків у ранніх інструментах аналітики до складного вимірювання взаємодій у сучасних платформах. Google Analytics 4 (GA4) представляє зміну парадигми, де все — включаючи перегляди сторінок — розглядається як подія, забезпечуючи безпрецедентну гнучкість у зборі та аналізі даних.

## Параметри подій: додавання контексту до дій

**Параметри подій** — це додаткові фрагменти інформації, які описують специфіку події. У той час як подія говорить вам, яка дія відбулася, параметри повідомляють деталі про цю дію — хто, що, де, коли і скільки.

Параметри перетворюють загальну подію «button_click» на дієву інформацію, фіксуючи:

- Яка кнопка була натиснута
- Де на сторінці вона знаходилася
- Який текст або мітку вона містила
- Коли в користувацькому шляху це сталося
- Будь-яке пов'язане значення або категорію

Ця контекстна інформація дозволяє проводити складний аналіз та сегментацію, дозволяючи зрозуміти не тільки те, що користувачі взаємодіють, але й як різні сегменти по-різному взаємодіють з різними елементами вашого цифрового досвіду.

### Типи параметрів подій

**Автоматично зібрані параметри**:

GA4 та подібні платформи автоматично фіксують певні параметри з кожною подією:

- `language`: Мовне налаштування браузера
- `page_location`: Повний URL сторінки
- `page_referrer`: URL попередньої сторінки
- `screen_resolution`: Розміри екрану пристрою
- `ga_session_id`: Унікальний ідентифікатор сесії
- `ga_session_number`: Кількість сесій користувача
- `engagement_time_msec`: Час взаємодії зі сторінкою

**Користувацькі параметри**:

Ви визначаєте їх на основі ваших конкретних потреб відстеження:

- Текстові параметри: `button_text`, `search_term`, `content_category`
- Числові параметри: `value`, `quantity`, `percentage_scrolled`
- Логічні параметри: `logged_in`, `newsletter_subscriber`
- Параметри ідентифікаторів: `product_id`, `user_id`, `transaction_id`

**Рекомендовані параметри подій**:

GA4 пропонує стандартні параметри для поширених випадків використання:

- `currency`: Трибуквений код валюти (USD, EUR, UAH)
- `value`: Грошова вартість події
- `items`: Масив об'єктів товарів для електронної комерції
- `method`: Використовуваний метод (наприклад, «Google», «Email»)
- `content_type`: Тип контенту (наприклад, «product», «article»)

!!! tip "Найкращі практики іменування параметрів"
    Використовуйте нижній регістр з підкресленнями (snake_case) для імен параметрів, робіть їх описовими, але стислими (менше 40 символів), уникайте пробілів та спеціальних символів, підтримуйте послідовні угоди про іменування у всій реалізації. Добре: `product_category`, `form_submit_type`. Погано: `Product-Category!`, `formSubmitType123`.

## Реалізація відстеження подій

### Реалізація в Google Analytics 4 (GA4)

Подієво-орієнтована модель даних GA4 робить відстеження подій центральним для всіх вимірювань:

**Базова подія через gtag.js**:

```javascript
// Відстеження події завантаження з параметрами
gtag('event', 'file_download', {
  'file_name': 'квартальний_звіт_2024.pdf',
  'file_extension': 'pdf',
  'file_size': '2.4MB',
  'content_category': 'звіти',
  'download_method': 'button_click'
});
```

**Розширена подія електронної комерції**:

```javascript
// Відстеження перегляду товару з детальними параметрами
gtag('event', 'view_item', {
  'currency': 'UAH',
  'value': 1299.00,
  'items': [{
    'item_id': 'SKU123',
    'item_name': 'Футболка з органічної бавовни',
    'item_category': 'Одяг',
    'item_category2': 'Футболки',
    'item_variant': 'Синій',
    'price': 1299.00,
    'quantity': 1,
    'item_brand': 'ЕкоОдяг'
  }]
});
```

**Користувацька подія залученості**:

```javascript
// Відстеження залученості з відео з користувацькими параметрами
gtag('event', 'video_progress', {
  'video_title': 'Демонстрація продукту 2024',
  'video_duration': 180,
  'video_current_time': 90,
  'video_percent': 50,
  'video_provider': 'youtube',
  'engagement_type': 'milestone',
  'user_subscription_status': 'безкоштовний'
});
```

### Реалізація через Google Tag Manager (GTM)

GTM надає зручний інтерфейс для відстеження подій без зміни коду:

**Налаштування відстеження прокручування**:

1. Створіть тригер глибини прокручування
2. Встановіть порогові відсотки (25%, 50%, 75%, 90%)
3. Створіть тег події GA4
4. Зіставте вбудовані змінні з параметрами

```
Ім'я події: scroll
Параметри:
- percent_scrolled: {{Scroll Depth Threshold}}
- page_path: {{Page Path}}
- content_group: {{Data Layer Variable - contentGroup}}
```

**Відстеження кліків з атрибутами елементів**:

```javascript
// Відправка в рівень даних для розширеного відстеження кліків
dataLayer.push({
  'event': 'enhanced_click',
  'click_element': {
    'element_id': event.target.id,
    'element_classes': event.target.className,
    'element_text': event.target.innerText,
    'element_url': event.target.href,
    'element_position': getElementPosition(event.target)
  }
});
```

### Серверна реалізація

Для чутливого або складного відстеження серверна реалізація пропонує переваги:

**Приклад Node.js з Measurement Protocol**:

```javascript
const measurement_id = 'G-XXXXXXXXXX';
const api_secret = 'ваш_секретний_ключ';

async function sendEvent(clientId, eventData) {
  const response = await fetch(
    `https://www.google-analytics.com/mp/collect?measurement_id=${measurement_id}&api_secret=${api_secret}`,
    {
      method: 'POST',
      body: JSON.stringify({
        'client_id': clientId,
        'events': [{
          'name': eventData.name,
          'params': {
            ...eventData.params,
            'engagement_time_msec': '100',
            'session_id': generateSessionId()
          }
        }]
      })
    }
  );
  return response;
}
```

!!! warning "Обмеження реалізації"
    GA4 встановлює кілька обмежень на події та параметри:
    
    - 500 різних імен подій на ресурс
    - 25 параметрів на подію
    - 50 користувацьких параметрів подій на ресурс
    - 25 користувацьких параметрів області користувача
    - Значення параметрів обмежені 100 символами (текст) або 40 символами (імена параметрів)

## Поширені типи подій та випадки використання

### Події залученості

Відстежуйте, як користувачі взаємодіють з вашим контентом:

**Взаємодія з контентом**:

```javascript
// Відстеження залученості зі статтею
gtag('event', 'article_milestone', {
  'article_title': document.title,
  'article_category': 'Технології',
  'read_percentage': 75,
  'time_on_article': 240,
  'scroll_depth': 85,
  'author_name': 'Петро Іванов'
});
```

**Соціальний шерінг**:

```javascript
// Відстеження соціального шерінгу
gtag('event', 'share', {
  'content_type': 'стаття',
  'item_id': 'post-123',
  'method': 'facebook',
  'content_title': 'Посібник з веб-аналітики',
  'share_location': 'плаваюча_бічна_панель'
});
```

### Події конверсій

Вимірюйте критичні бізнес-результати:

**Генерація лідів**:

```javascript
// Відправка форми з оцінкою кваліфікації
gtag('event', 'generate_lead', {
  'currency': 'UAH',
  'value': 2000,  // Оціночна вартість ліда
  'lead_source': 'органічний_пошук',
  'form_id': 'contact_form_header',
  'form_fields_completed': 5,
  'company_size': 'ентерпрайз',
  'interest_level': 'високий'
});
```

**Мікроконверсії**:

```javascript
// Відстеження індикаторів менших конверсій
gtag('event', 'sign_up_started', {
  'signup_method': 'email',
  'referral_source': 'blog_cta',
  'user_intent': 'пробний_період',
  'form_abandonment_field': 'номер_телефону'
});
```

### Події електронної комерції

Комплексне відстеження воронки покупок:

**Додавання в кошик з розширеним контекстом**:

```javascript
gtag('event', 'add_to_cart', {
  'currency': 'UAH',
  'value': 3999.00,
  'items': [{
    'item_id': 'PROD456',
    'item_name': 'Бездротові навушники',
    'discount': 400.00,
    'item_category': 'Електроніка',
    'price': 3999.00,
    'quantity': 1
  }],
  'cart_total_before': 1500.00,
  'cart_total_after': 5499.00,
  'add_to_cart_method': 'швидке_додавання'
});
```

### Користувацькі бізнес-події

Відстежуйте галузеві взаємодії:

**Використання функцій SaaS**:

```javascript
// Відстеження прийняття функцій
gtag('event', 'feature_used', {
  'feature_name': 'розширена_звітність',
  'feature_category': 'аналітика',
  'user_plan': 'професійний',
  'usage_frequency': 'щоденно',
  'feature_depth': 'просунутий',
  'time_to_first_use': 300  // секунд від входу
});
```

## Міркування щодо конфіденційності та відповідності

### Принципи мінімізації даних

Збирайте лише необхідні параметри:

- Уникайте збору персонально ідентифікованої інформації (PII)
- Використовуйте хешовані або псевдонімізовані ідентифікатори
- Впровадьте білі списки параметрів
- Регулярний аудит зібраних параметрів

**Реалізація з урахуванням конфіденційності**:

```javascript
// Хешування чутливих даних перед відправкою
function hashEmail(email) {
  return CryptoJS